@startuml
skinparam classAttributeIconSize 0
skinparam monochrome true
skinparam packageStyle rectangle

package "org.yourcompany.yourproject" {

    class ATM {
        {static} -teclat: Scanner
        {static} -caixer: Caixer
        {static} +main(args: String[])
        {static} -demanarLogin()
        {static} -mostrar_menu()
        {static} -mostrar_comptes()
        {static} -mostrar_moviments()
        {static} -ingressar()
        {static} -retirar()
        {static} -transferir()
    }

    class Caixer {
        -banc: Banc
        -clientConnectat: Client
        +Caixer()
        +login(dni: String, PIN: String): boolean
        +mostrarComptes(): boolean
        +mostrarMoviments(numeroCompte: String): boolean
        +ingressar(numero: String, quantitat: double): boolean
        +retirar(numero: String, quantitat: double): boolean
        +transferir(origen: String, desti: String, quantitat: double): boolean
    }

    class Client {
        -dni: String
        -nom: String
        -pin: String
        -intentsFallits: int
        -bloquejat: boolean
        +Client(dni: String, nom: String, pin: String)
        +comprovarPin(pinIntroduit: String): boolean
        +resetIntents()
        +getters/setters()
    }

    abstract class Compte {
        #numero: String
        #saldo: double
        #titular: Client
        #interesAnual: double
        #moviments: ArrayList<Moviment>
        {static} -comptador: int
        {static} -prefix: String
        +Compte()
        +Compte(titular: Client, saldo: double)
        +ingressar(quantitat: double): boolean
        +retirar(quantitat: double): boolean
        +transferir(desti: Compte, quantitat: double): boolean
        +calculaInteresAnual(): double
    }

    class CompteCorrent {
        -limitDescobert: double
        +CompteCorrent(titular: Client, saldo: double, limit: double)
        +retirar(quantitat: double): boolean
    }

    class CompteEstalvi {
        -saldoMinim: double
        +CompteEstalvi(titular: Client, saldo: double, minim: double)
        +retirar(quantitat: double): boolean
    }

    class Moviment {
        -dataHora: LocalDateTime
        -descripcio: String
        -tipusMoviment: TipusMoviment
        -quantitat: double
        +Moviment(desc: String, tipus: TipusMoviment, q: double)
    }

    enum TipusMoviment {
        INGRES
        RETIRADA
        TRANSFERENCIA
    }

    ' Relacions d'Herència
    Compte <|-- CompteCorrent
    Compte <|-- CompteEstalvi

    ' Relacions de dependència i composició
    ATM ..> Caixer : usa
    Caixer o-- Client : clientConnectat
    Compte o-- Client : titular
    Compte *-- Moviment : llista moviments
    Moviment --> TipusMoviment
}
@enduml